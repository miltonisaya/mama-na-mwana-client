<div fxFlexLayoutAlign="row" fxLayoutAlign="space-between center">
  <div>
    <h3>Dashboard</h3>
  </div>
</div>

<div fxLayout="row" fxLayoutAlign="space-between stretch">
  <mat-card fxFlex="50" class="card-red" *ngIf="numberOfRegisteredContactsIsReady === true">
    <h1>Total # of registered contacts: {{numberOfRegisteredContacts}}</h1>
  </mat-card>
  <mat-card fxFlex="50" class="card-green" *ngIf="numberOfRegisteredContactsTodayIsReady === true">
    <h1>Total # of registered contacts today: {{numberOfRegisteredContactsToday}}</h1>
  </mat-card>
</div>
<p></p>

<div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="20px">
  <div fxFlex="100" class="mat-elevation-z8">
    <div fxLayout="column" fxLayoutAlign="space-evenly end" >
      <button mat-raised-button type="button" class="mat-primary mat-elevation-z8" (click)="registrationsByFacility()">DOWNLOAD REGISTRATIONS BY FACILITY</button>
    </div>

    <app-widget-bar [data]="bigChart" [title]="titleCouncils" *ngIf="bigChartsIsReady === true"></app-widget-bar>
  </div>
</div>
<p></p>

<div fxLayout="column" fxLayoutAlign="stretch">
  <h3>Transaction Logs</h3>
</div>

<mat-card class="mat-elevation-z8">
<ul>
  <li *ngFor="let trx of transactions?.content">
    <div class="transaction-logs">
      <b>Date Processed:</b> {{trx.dateProcessed}}
      <br>
      <b>Payload:</b> <ngx-json-viewer [json]=parseToJson(trx.payload) [expanded]="false"></ngx-json-viewer>
      <br>
      <b>DHIS2 Response:</b> {{trx.dhisResponse}}
            <div *ngIf="trx.isSent" class="success-transactions">
              Sent
            </div>
            <div *ngIf="trx.isSent == false" class="pending-transactions">
              Not Sent
            </div>
            <button *ngIf="trx.isSent==false" matTooltip="Resend" matTooltipPosition="left" mat-icon-button>
              <button mat-raised-button class="mat-button mat-primary" (click)="resend(trx)">Resend</button>
            </button>
      <mat-divider></mat-divider>
    </div>
  </li>
</ul>
</mat-card>

<!--<table class="mat-elevation-z8" mat-table [dataSource]="dataSource"  fxLayout="column" fxLayoutAlign="stretch">-->
<!--  &lt;!&ndash; SNo Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="sno">-->
<!--    <th mat-header-cell *matHeaderCellDef> No</th>-->
<!--    <td mat-cell *matCellDef="let transactions; let i = index">{{i + 1}}</td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Date Processed Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="dateProcessed">-->
<!--    <th mat-header-cell *matHeaderCellDef> Date Processed</th>-->
<!--    <td mat-cell *matCellDef="let transactions"> {{transactions.dateProcessed | date: 'mediumDate'}} </td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Payload Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="payload">-->
<!--    <th mat-header-cell *matHeaderCellDef>Payload</th>-->
<!--    <td mat-cell *matCellDef="let transactions" >-->
<!--      <ngx-json-viewer [json]=parseTrxToJson(transactions.payload) [expanded]="false"></ngx-json-viewer>-->
<!--    </td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Response Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="response">-->
<!--    <th mat-header-cell *matHeaderCellDef>DHIS2 Response</th>-->
<!--    <td mat-cell *matCellDef="let transactions" >-->
<!--      <ngx-json-viewer [json]=parseToJson(transactions.dhisResponse) [expanded]="false"></ngx-json-viewer>-->
<!--    </td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Status Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="isSent">-->
<!--    <th mat-header-cell *matHeaderCellDef>Status</th>-->
<!--    <td mat-cell *matCellDef="let transactions">-->
<!--      <div *ngIf="transactions.isSent" class="success-transactions">-->
<!--        Sent-->
<!--      </div>-->
<!--      <div *ngIf="transactions.isSent == false" class="pending-transactions">-->
<!--        Not Sent-->
<!--      </div>-->
<!--    </td>-->
<!--  </ng-container>-->

<!--  &lt;!&ndash; Action Column &ndash;&gt;-->
<!--  <ng-container matColumnDef="actions">-->
<!--    <th mat-header-cell *matHeaderCellDef>Action</th>-->
<!--    <td mat-cell *matCellDef="let transactions">-->
<!--      <button *ngIf="transactions.isSent==false" matTooltip="Resend" matTooltipPosition="left" mat-icon-button>-->
<!--        <mat-icon (click)="resend(transactions)">autorenew</mat-icon>-->
<!--      </button>-->
<!--    </td>-->
<!--  </ng-container>-->

<!--  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>-->
<!--  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>-->

<!--  &lt;!&ndash; Row shown when there is no matching data. &ndash;&gt;-->
<!--  <tr class="mat-row" *matNoDataRow>-->
<!--    <td class="mat-cell" colspan="3">No data matching the filter"</td>-->
<!--  </tr>-->
<!--</table>-->

<mat-paginator
  fxLayout="column"
  fxLayoutAlign="stretch"
  class="mat-elevation-z8"
  [pageSize]="pageSize"
  [pageSizeOptions]="pageSizeOptions"
  [length]="transactions?.totalElements"
  (page)="pageChanged($event)"
></mat-paginator>
